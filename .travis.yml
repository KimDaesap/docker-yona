language: bash

# for secret experimental features ;)
dist: trusty

env:
  - VERSION=10.0
  - VERSION=5.5

install:
  - git clone https://github.com/docker-library/official-images.git ~/official-images

before_script:
  - env | sort
  - cd "$VERSION"
  - image="mariadb:$VERSION"

script:
  - docker build -t "$image" .
  - ~/official-images/test/run.sh "$image"

# vim:set et ts=2 sw=2:
# sudo: required
# # language: bash
# # dist: trusty
#
# install:
#   - sudo sh -c "wget -qO- https://get.docker.io/gpg | apt-key add -"
#   - sudo sh -c "echo deb http://get.docker.io/ubuntu docker main > /etc/apt/sources.list.d/docker.list"
#   - sudo apt-get update
#   - sudo mkdir -p /var/lib/docker
#   - echo exit 101 | sudo tee /usr/sbin/policy-rc.d
#   - sudo chmod +x /usr/sbin/policy-rc.d
#   - sudo apt-get install -y slirp lxc lxc-docker aufs-tools cgroup-lite
#   - git clone https://github.com/saltfactory/docker-yobi.git ~/dockers/docker-yobi
#
# script:
#   - cd ~/docker/docker-yobi; mkdir yobi
#   - cd ~/dockers/docker-yobi; bash build.sh
#   - cd ~/dockers/docker-yobi; bash start.sh
